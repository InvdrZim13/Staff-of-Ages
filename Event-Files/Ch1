#include EAstdlib.event

EventPointerTable(0x0A,ThisChapter)

ORG 0x1127D00

ThisChapter:
POIN TurnBasedEvents
POIN CharacterBasedEvents
POIN LocationBasedEvents
POIN MiscBasedEvents
POIN Dunno Dunno Dunno
POIN Tutorial
POIN TrapData TrapData
POIN Units Units
POIN $0 $0 $0 $0 $0 $0
POIN BeginningScene EndingScene

Units:
//UNIT *Char ID* *Class ID* *Leader char* Level(#,side,autolevel?)  [Loading position X, Loading position Y] 
//*Flags* *Byte1* *Amount* *Reinforcement DAta* [Item 1, Item 2, Item 3, Item 4] [AI 1, AI 2, AI 3, AI 4]
UNIT 0xF 0x1 0x00 Level(1,Ally,False) [1,3] 0x00 0x00 0x01 OwenLoad [0x45, Vulnerary] NoAI
UNIT 0x0B 0x25 0xF Level(1,Ally,False) [2,2] 0x00 0x00 0x01 SawyerLoad [Fire, Vulnerary] NoAI
UNIT

Enemies:
UNIT 0x80 0x19 0x46 Level(2, Enemy, True) [7,6] 0x00 0x00 0x01 E1 [IronBow] [0x0,0x3,0x9,0x0] //Archer
UNIT 0x82 0x13 0x46 Level(2, Enemy, True) [7,6] 0x00 0x00 0x01 E2 [IronSword] [0x0,0x3,0x9,0x0] //Myrm
UNIT 0x83 0x05 0x46 Level(2,Enemy,True) [9,14] 0x00 0x00 0x01 E3 [IronSword] [0x0,0x3,0x9,0x0] //Cav
UNIT 0x83 0x05 0x46 Level(2,Enemy,True) [7,6] 0x00 0x00 0x01 E4 [IronSword] [0x0,0x3,0x9,0x0] //Cav
UNIT 0x46 0x0F 0x00 Level(2,Enemy,True) [9,14] 0x00 0x00 0x01 E5 [IronSword] [0x0,0x3,0x9,0x0] //Mustang
UNIT 0x84 0x0F 0x46 Level(2,Enemy,True) [9,14] 0x00 0x00 0x01 E6 [IronSword] [0x0,0x3,0x9,0x0]//Must find pursue AI //Merc
UNIT 0x85 0x48 0x46 Level(2,Enemy,True) [7,6] 0x00 0x00 0x01 E7 [IronLance,Javelin] [0x0,0x3,0x9,0x0] //Peg
UNIT

OwenLoad:
REDA [1,3] 0x05 0x00 0x00 0x00 0x00

SawyerLoad:
REDA [2,2] 0x05 0x00 0x00 0x00 0x00

E1:
REDA [3,8] 0x10 0x00 0x00 0x00 0x00

E2:
REDA [7,6] 0x10 0x00 0x00 0x00 0x00

E3:
REDA [11,9] 0x10 0x00 0x00 0x00 0x00

E4:
REDA [1,10] 0x10 0x00 0x00 0x00 0x00

E5:
REDA [9,14] 0x10 0x00 0x00 0x00 0x00

E6:
REDA [10,11] 0x10 0x00 0x00 0x00 0x00

E7:
REDA [8,9] 0x10 0x00 0x00 0x00 0x00

T1:

REDA [0,0] 0x10 0x00 0x00 0x00 0x00

TurnBasedEvents:
TURN 0x0 BeginningScene [1,0] 0x0
TURN 0x0 Eagl [3,0] 0x0
TURN 0x0 Eli [5,0] 0x0
TURN 0x0 BadRein[6,0] 0x0 
END_MAIN

CharacterBasedEvents:
//TODO: Add talks
END_MAIN

LocationBasedEvents:
END_MAIN

MiscBasedEvents:
CauseGameOverIfLordDies
DefeatBoss(EndingScene)
END_MAIN

Dunno:
//DO NOT TOUCH
WORD $00

Tutorial:
//DO NOT TOUCH
WORD $00

TrapData:
END_MAIN

ALIGN 4

BeginningScene:
DISA Eirika
DISA 0x19

SETVAL 0x2 0x3
CALL BGStart
//MUS1 0x??
TEXTSHOW 0x912 //Owen Sawyer talk
TEXTEND
CALL BGEnd
MUS1 0x00

_LOAD1 0x1 Units 
_LOAD1 0x1 Enemies
STAL 0x50
SETVAL 0x2 0x3
CALL BGStart
MUS1 0x25
TEXTSHOW 0x913 //Mustang.png
TEXTEND
CALL BGEnd
MUS1 0x00

ENDA

EndingScene:
//TODO: Add ending events
ENDA

// Events
Eagl:
_LOAD1 0x1 Eag
ENUN
//TODO: Add join dialogue
ENDA
Eli:
_LOAD1 0x1 Elijah
ENUN
//TODO: Add join dialogue
ENDA
BadRein:
_LOAD1 0x1 BadRe
ENUN
ENDA

// Manual Movement

// Scripted Fights

// Units
//UNIT *Char ID* *Class ID* *Leader char* Level(#,side,autolevel?)  [Loading position X, Loading position Y] 
//*Flags* *Byte1* *Amount* *Reinforcement DAta* [Item 1, Item 2, Item 3, Item 4] [AI 1, AI 2, AI 3, AI 4]
Eag:
UNIT 0x10 0x05 0xF Level(1,Ally,0) [0,13] 0x00 0x00 1 Eaglu [IronLance,IronSword] NoAI
UNIT
Eaglu:
REDA [0,11] 0x10 0x00 0x00 0x00 0x00

Elijah:
UNIT 0x0A 0x3F 0xF Level(5, Ally, 0) [0,13] 0x00 0x00 1 Elijer [SteelAxe] NoAI
UNIT
Elijer:
REDA [0,11] 0x10 0x00 0x00 0x00 0x00

BadRe:
UNIT 0x83 0x05 0x46 Level(2,Enemy,True) [1,3] 0x00 0x00 1 Re1 [IronLance] [0x0,0x3,0x9,0x0]
UNIT 0x83 0x05 0x46 Level(2,Enemy,True) [0,3] 0x00 0x00 1 Re2 [IronLance] [0x0,0x3,0x9,0x0]
UNIT
Re1:
REDA [1,3] 0x10 0x00 0x00 0x00 0x00
Re2:
REDA [0,3] 0x10 0x00 0x00 0x00 0x00
// Shop Data

MESSAGE Events end at offset currentOffset

BGStart:
EVBIT_CHECK 0x8 //some kind of check if it should fade in? Can't find any doc on evbits
IFEQUAL 0x80D2 0xC 0x0
FADI 16
ENIF 0x80D2
_0x1A21
_0x2140 0xFFFF 0x0 0x0 //show bg
FADU 16
ENDA
BGEnd:
EVBIT_CHECK 0x8 //another check for fading
IFEQUAL 0x80BD 0xC 0x0
FADI 16
ENIF 0x80BD
TEXTSTART //Apparently is not just used for starting text
_0x2220 //No idea
FADU 16
ENDA
